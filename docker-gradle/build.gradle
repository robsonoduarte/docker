apply plugin: 'java'
apply plugin: 'scala'
apply plugin: 'eclipse'
apply plugin: 'docker'




buildscript {
    repositories { mavenLocal(); jcenter() }
    dependencies {
        classpath 'se.transmode.gradle:gradle-docker:1.2'
    }
}


repositories {
    jcenter()
}

dependencies {
	compile 'org.scala-lang:scala-library:2.11.8'
	testCompile 'junit:junit:4.12'
}

jar {
    manifest {
        attributes 'Main-Class': 'br.com.mystudies.docker.gradle.Echo'
    }

     from {
    	configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
  	}
}


docker {
    baseImage 'java:jre-alpine'
}


task dockerImage(type: Docker, dependsOn: ['clean', 'jar']) {

	addFile jar.archivePath, '/' + jar.archiveName
	defaultCommand = ['java', '-jar' , jar.archiveName ]
}


